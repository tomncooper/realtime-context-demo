# Quarkus application configuration for SmartShip Query API

# Application name
quarkus.application.name=smartship-query-api

# HTTP configuration
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# OpenAPI / Swagger UI
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.smartship".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Container image configuration
quarkus.container-image.group=smartship
quarkus.container-image.name=query-api
quarkus.container-image.tag=latest
quarkus.container-image.builder=jib
quarkus.jib.base-jvm-image=eclipse-temurin:25-jdk-ubi10-minimal

# Kafka Streams Query Service configuration
# Uses headless service for discovering individual stream-processor instances
streams-processor.headless-service=streams-processor-headless.smartship.svc.cluster.local
streams-processor.port=7070

# Cache configuration for instance discovery
quarkus.cache.caffeine.streams-instances.expire-after-write=30S
quarkus.cache.caffeine.streams-instances.maximum-size=10

# PostgreSQL Reactive Client Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${POSTGRES_USER:smartship}
quarkus.datasource.password=${POSTGRES_PASSWORD:smartship123}
quarkus.datasource.reactive.url=postgresql://${POSTGRES_HOST:postgresql.smartship.svc.cluster.local}:5432/${POSTGRES_DB:smartship}
quarkus.datasource.reactive.max-size=10
quarkus.datasource.health.enabled=true
